/*!
 * 
 * 			tmpl-router.js v1.0.2
 * 			(c) 2016-2017 Blue
 * 			Released under the MIT License.
 * 			https://github.com/azhanging/tmpl-router
 * 			time:Wed Sep 27 2017 20:33:07 GMT+0800 (中国标准时间)
 * 		
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TmplRourt",[],e):"object"==typeof exports?exports.TmplRourt=e():t.TmplRourt=e()}(this,function(){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist",e(e.s=1)}([function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),s=r(5),u=o(s),c=r(4),a=o(c),h=r(3),l=o(h),f=function(){function t(e){if(n(this,t),this.constructor.hasTmplRouter)return this.constructor.tmplRouter;this.init(e)}return i(t,[{key:"init",value:function(t){u.default.call(this,t)}},{key:"set",value:function(t){var e=this,r=this.constructor.fn;return r.isObj(t)&&r.each(t,function(t,r){e.routes[r]=t}),setPaths.call(this,t),this}},{key:"hashChange",value:function(){a.default.call(this)}},{key:"go",value:function(t){this.constructor.fn.isNum(t)&&history.go(t)}},{key:"redirect",value:function(t){t=t.replace("#","");var e=location.href.split("#");"/"===t?location.href=e[0]:(e[1]=t,location.href=e.join("#"))}},{key:"getTmpl",value:function(t){l.default.call(this,t)}},{key:"query",value:function(t){var e=this.constructor.fn;if(!e.isStr(t))return{};var r={},o=t.split("&");return e.each(o,function(t,e){var o=t.split("=");if(1!==o.length){var n=o[0],i=o[1];r[n]=i}}),r}},{key:"search",value:function(t,e){var r=this.constructor.fn,o=this.constructor.tmpl,n="";try{n=o.attr(t,"href").split("?")}catch(e){n=t.split("?")}if(!e)return n[1];r.isObj(e)&&(e=r.serialize(e)),n[1]=e,o.attr(t,{href:n.join("?")})}},{key:"getHash",value:function(t){return void 0===t&&(t=window.location.hash.replace("#","")),t.replace("#","").split("?")[0]}},{key:"changeRoutereStatus",value:function(t){this.routerStatus=t}}],[{key:"install",value:function(t){if(this.installed)return this;this.installed=!0,this.tmpl=new t({}),this.fn=this.tmpl.fn}}]),t}();e.default=f,window.Tmpl&&"function"==typeof Tmpl&&f.install(Tmpl)},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var n=r(0),i=o(n);!function(t,e){"function"==typeof demand&&demand.define("tmpl-router",e)}("undefined"!=typeof window&&window,function(){return i.default.version="v1.0.3",i.default})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={routerLink:"tmpl-router",routerLinkActive:"tmpl-router-active",routerView:"tmpl-router-view",routerAnchor:"tmpl-router-anchor",routerAnchorAttr:"tmpl-anchor",routerAnchorTop:"tmpl-anchor-top",anchorTime:1e3,data:{},methods:{}};e.default=o},function(t,e,r){"use strict";function o(t){var e=this.constructor.fn,r=this.constructor.tmpl,o=this;if(!(!this.routes[t]||this.routes[t].view.length>0||this.routes[t].temp.childNodes.length>0)){var i=this.routes[t].tmplUrl,s=this.routes[t].tmplId;if(i)try{$.ajax({async:!1,url:i,success:function(e){o.routes[t].temp.appendChild(r.create(e.tmpl)),n.call(o,o.routes[t].temp),o.changeRoutereStatus(!1)},error:function(t){o.changeRoutereStatus(!0)}})}catch(s){e.ajax({async:!1,url:i,success:function(e){o.routes[t].temp.appendChild(r.create(e.tmpl)),n.call(o,o.routes[t].temp),o.changeRoutereStatus(!1)},error:function(t){o.changeRoutereStatus(!0)}})}else if(s){try{this.routes[t].temp.appendChild(r.create(r.html(r.getEl(s))))}catch(e){this.routes[t].temp.appendChild(r.create(""))}this.changeRoutereStatus(!0)}}}function n(t){var e=this.constructor.fn,r=this.constructor.tmpl;e.each(t.childNodes,function(t,e){t&&3===t.nodeType&&""===t.textContent.trim()&&r.remove(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,r){"use strict";function o(){var t=this.constructor.fn,e=this.constructor.tmpl,r=window.location.hash.replace("#",""),o=e.getEls(this.config.routerLink),s=(this.$lastRouter,this.getHash(r)),u=!1;return""===s&&(s="/"),this.alias[s]&&(u=!0,s=i.apply(this,["/"===s?s:r,null])),0===o.length?this:this.alias[s]||this.routes[s]?(t.run(this.routes[s].routerEnter,this,[r,this.$from]),t.run(this.config.routerEnter,this,[r,this.$from]),void n.apply(this,[o,u?s:r,r])):void t.run(this.config.error,this)}function n(t,e,r){var o=this,n=this.constructor.fn,i=this.constructor.tmpl,a=this.getHash(e),h=this.$lastRouter,l=null;this.getTmpl(a),h&&(s.call(this,this.getHash(h)),this.$from=r),this.$lastRouter=e,u.apply(this,[a]),n.each(t,function(t,e){var r=i.attr(t,"href"),n=o.getHash(r);n===a?(o.currentRouter=n,l=t,i.addClass(t,o.config.routerLinkActive)):(o.routes[n]&&s.call(o,n),i.removeClass(t,o.config.routerLinkActive)),l||(o.currentRouter=a)}),c.call(this,a),n.run(this.routes[a].routerEntered,this,[e,this.$from,l]),n.run(this.config.routerEntered,this,[e,this.$from,l])}function i(t,e){var r=(this.constructor.fn,this.getHash(t)),o=this.alias[r];return this.alias[o]?i.apply(this,[o,e]):o}function s(t){var e=this;this.constructor.fn.each(this.routes[t].view,function(r,o){e.routes[t].temp.appendChild(r)}),this.routes[t].view=[]}function u(t){var e=this,r=this.constructor.fn,o=this.constructor.tmpl,n=this.routerView;n.appendChild(this.routes[t].temp),r.each(o.children(n),function(r,o){e.routes[t].view.push(r)})}function c(t){this.config.keepLive&&this.routes[t].keepLive?a.call(this,this.routes[t].scrollTop):a.call(this,0)}function a(t){if(!this.constructor.fn.isNum(t))return 0;try{document.body.scrollTop=parseFloat(t)}catch(e){document.documentElement.scrollTop=parseFloat(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o},function(t,e,r){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function n(t){var e=this.constructor.fn,r=this.constructor.tmpl;this.routes={},this.constructor.tmplRouter=this,this.constructor.tmpl.constructor.router=this,this.config=e.extend(e.copy(s.default),t),this.routerView=r.getEl(this.config.routerView),u.setRouter.call(this,this.config.routes?this.config.routes:{}),u.setInstance.call(this,"methods"),u.setInstance.call(this,"data"),u.setRouterLinkStatus.call(this),u.setRouterAnchor.call(this,this.config.anchorTime),u.setkeepLive.call(this),u.setPaths.call(this,this.routes),u.setHashEvent.call(this),e.run(this.config.created,this),this.hashChange(),e.run(this.config.mounted,this)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var i=r(2),s=o(i),u=r(6)},function(t,e,r){"use strict";function o(t,e){var r=this,n=this.constructor.fn,i=e||"";n.each(t,function(t,e){if(void 0!==t.path){var s=i+t.path;n.isArr(t.modules)&&o.apply(r,[t.modules,s]),r.routes[s]=t,delete t.modules}})}function n(t){var e=this,r=this.constructor.fn,o=this.config[t];r.isObj(o)&&r.each(o,function(t,r){e[r]=t})}function i(){var t=this,e=this.constructor.fn,r=this.constructor.tmpl;this.changeRoutereStatus(!0);var o=r.getEls(this.config.routerLink);e.each(o,function(o,n){e.on(o,"click",function(n){var i=r.attr(o,"href"),s=t.getHash(i);t.getHash(t.$lastRouter)!==s&&e.run(t.config.triggerRouter,t,[i,o]),t.routerStatus?t.redirect(i):n.preventDefault()})})}function s(t){function e(t){t.preventDefault()}var r=this,o=this.constructor.fn,n=this.constructor.tmpl;n.on(document,this.config.routerAnchor,"click",function(i,s){var u=n.attr(s,r.config.routerAnchorAttr),c=n.getEl(u),a=n.attr(s,r.config.routerAnchorTop);a=o.isNum(a)?Number(a):0,o.isEl(c)&&(window.addEventListener("mousewheel",e),n.animate(document,{scrollTop:n.offset(c).top+a},t,function(){window.removeEventListener("mousewheel",e)}))})}function u(){var t=this,e=this.constructor.fn;this.config.keepLive&&e.on(window,"scroll",function(e){t.routes[t.currentRouter]&&t.routes[t.currentRouter].keepLive&&(t.routes[t.currentRouter].scrollTop=document.body.scrollTop||document.documentElement.scrollTop)})}function c(t){var e=this,r=this.constructor.fn;this.alias={},r.each(t,function(t,r){var o=t.alias;e.routes[r].view=[],e.config.keepLive&&void 0===e.routes[r].keepLive&&(e.routes[r].keepLive=!0),e.routes[r].temp=document.createDocumentFragment(),o&&(e.alias[o]=r)})}function a(){var t=this,e=this.constructor.tmpl;this.constructor.hasTmplRouter||(window.onhashchange=function(r){t.hashChange(),e.preventDefault(r)},this.constructor.hasTmplRouter=!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.setRouter=o,e.setInstance=n,e.setRouterLinkStatus=i,e.setRouterAnchor=s,e.setkeepLive=u,e.setPaths=c,e.setHashEvent=a}])});
//# sourceMappingURL=tmpl-router.min.js.map